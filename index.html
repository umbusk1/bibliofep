<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acceso al Sistema</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }

    .hero-image {
      max-width: 100%;
      height: auto;
      object-fit: cover;
      display: block;
    }

    .container {
      max-width: 400px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .login-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 30px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }

    h1 {
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      margin: 0 0 30px 0;
      color: #333;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #333;
      font-size: 14px;
    }

    input[type="text"],
    input[type="password"] {
      width: 100%;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    input[type="text"]:focus,
    input[type="password"]:focus {
      outline: none;
      border-color: #007bff;
    }

    button {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      font-weight: bold;
      color: white;
      background-color: #007bff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #0056b3;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .error-message {
      color: #dc3545;
      font-size: 14px;
      margin-top: 10px;
      text-align: center;
      display: none;
    }

    .loading {
      text-align: center;
      color: #666;
      font-size: 14px;
      margin-top: 10px;
      display: none;
    }

    .footer {
	  text-align: center;
	  margin-top: 30px;
	  font-size: 12px;
	  color: #666;
	  padding-bottom: 20px;
	}

	.umbusk-section {
	  margin-top: 15px;
	}

	.umbusk-link {
	  text-decoration: none;
	  display: inline-block;
	}

	.umbusk-logo {
	  max-width: 60px;
	  height: auto;
	  opacity: 0.8;
	  transition: opacity 0.3s ease;
	}

	.umbusk-logo:hover {
	  opacity: 1;
	}

	.vibe-text {
	  margin-top: 8px;
	  font-size: 11px;
	  color: #888;
	  font-style: italic;
	  letter-spacing: 0.5px;
	}
  </style>
</head>
<body>
  <!-- Hero Image -->
  <img src="/Imagenes/HeroImageSHOP.png"
       alt="SHOP2 Banner"
       class="hero-image">

  <div class="container">
    <div class="login-card">
      <h1>Acceso al Sistema</h1>

      <form id="loginForm" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label for="username">Usuario</label>
          <input
            type="text"
            id="username"
            name="username"
            required
            autocomplete="username"
            placeholder="Ingrese su usuario">
        </div>

        <div class="form-group">
          <label for="password">Contraseña</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            autocomplete="current-password"
            placeholder="Ingrese su contraseña">
        </div>

        <button type="submit" id="submitBtn">
          Iniciar Sesión
        </button>

        <div id="errorMessage" class="error-message"></div>
        <div id="loadingMessage" class="loading">Verificando credenciales...</div>
      </form>
    </div>

    <div class="footer">
	  <p style="margin-bottom: 20px;">BioDentoSalud &copy; 2025</p>
	  <div class="umbusk-section">
	    <a href="https://umbusk.com" target="_blank" class="umbusk-link">
	      <img src="/Imagenes/Logo_BC1_Oreo_Tilted_with_name_only.png"
		       alt="Umbusk, LLC"
     			class="umbusk-logo">
	    </a>
	    </br>
	    <div class="vibe-text">Vibe-coded</div>
	  </div>
</div>

  <script>
    // URL de tu Google Apps Script Web App
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxLGaBSLaAKnznULASbFXPko4dCB3yBCs12gzsC_r8pNJRCmRkyqXWAskfttRPrInutbQ/exec';

    function handleLogin(event) {
      event.preventDefault();

      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const submitBtn = document.getElementById('submitBtn');
      const errorMsg = document.getElementById('errorMessage');
      const loadingMsg = document.getElementById('loadingMessage');

      // Mostrar loading
      submitBtn.disabled = true;
      loadingMsg.style.display = 'block';
      errorMsg.style.display = 'none';

      // Crear un formulario oculto y enviarlo por POST
      const form = document.createElement('form');
      form.method = 'GET';  // Usamos GET pero con parámetros más seguros
      form.action = APPS_SCRIPT_URL;

      // Agregar campos
      const actionField = document.createElement('input');
      actionField.type = 'hidden';
      actionField.name = 'action';
      actionField.value = 'loginSimple';
      form.appendChild(actionField);

      const userField = document.createElement('input');
      userField.type = 'hidden';
      userField.name = 'u';
      userField.value = username;
      form.appendChild(userField);

      const passField = document.createElement('input');
      passField.type = 'hidden';
      passField.name = 'p';
      passField.value = password;
      form.appendChild(passField);

      // Enviar el formulario
      document.body.appendChild(form);
      form.submit();
    }
  </script>
</body>
</html>